<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Watch Party Overlay - Music Player Style</title>
    <link rel="stylesheet" href="css/overlay-display.css">
</head>
<body>
    <!-- Video Player Bottom Bar Style Layout (1200x100 base) -->
    <div id="video-bar-container">
        <!-- Main Bar Area (Always Visible) -->
        <div id="main-bar">
            <!-- Normal Mode: Two rows layout -->
            <div id="normal-mode-container">
                <!-- Row 1: Series Title -->
                <div id="series-row">
                    <div id="series-title" class="series-title">시리즈 정보 없음</div>
                </div>
                
                <!-- Row 2: Episode, Progress, Time, Platform, Settings -->
                <div id="main-row">
                    <div id="episode-title" class="episode-title">에피소드 정보를 가져오는 중...</div>
                    
                    <div id="progress-section">
                        <div id="progress-bar-container">
                            <div id="progress-bar">
                                <div id="progress-fill"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div id="time-display">
                        <span id="current-time">00:00</span>
                        <span id="time-separator"> / </span>
                        <span id="duration-time">00:00</span>
                    </div>
                    
                    <div id="site-name" class="platform-badge">사이트 정보 없음</div>
                </div>
            </div>
            
            <!-- Compact Mode: Single row layout -->
            <div id="compact-mode-container" style="display: none;">
                <div id="compact-episode-title" class="episode-title">에피소드 정보를 가져오는 중...</div>
                
                <div id="compact-time-display">
                    <span id="compact-current-time">00:00</span>
                    <span id="compact-time-separator"> / </span>
                    <span id="compact-duration-time">00:00</span>
                </div>
            </div>
        </div>
        
        <!-- Expand/Collapse Bar -->
        <div id="expand-bar" class="expand-bar">
            <span id="expand-arrow">▼</span>
        </div>
        
        <!-- Expanded Settings Panel (Hidden by default) -->
        <div id="expanded-panel" class="collapsed">
            <div class="panel-content">
                <div class="control-group">
                    <h3>표시 설정</h3>
                    <div class="setting-row">
                        <label>표시 모드:</label>
                        <select id="display-mode-select">
                            <option value="normal">기본 모드 (2행)</option>
                            <option value="compact">컴팩트 모드</option>
                        </select>
                    </div>
                    <div class="setting-row">
                        <label>시간 표시:</label>
                        <select id="time-display-select">
                            <option value="current_duration">현재/전체</option>
                            <option value="current_only">현재만</option>
                            <option value="none">숨김</option>
                        </select>
                    </div>
                    
                    <div class="setting-row">
                        <label>진행바 표시:</label>
                        <label class="ios-toggle">
                            <input type="checkbox" id="progress-bar-toggle" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    
                    <div class="setting-row">
                        <label>플랫폼 표시:</label>
                        <label class="ios-toggle">
                            <input type="checkbox" id="platform-badge-toggle" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    
                    <div class="setting-row">
                        <label>너비:</label>
                        <input type="range" id="window-width-slider" min="300" max="1200" value="600" style="width: 120px;">
                        <span id="window-width-value" style="font-size: 11px; margin-left: 5px;">600px</span>
                    </div>
                </div>
                
                <div class="control-group">
                    <h3>모양 설정</h3>
                    
                    <!-- Colors -->
                    <div class="setting-row">
                        <label>배경색:</label>
                        <input type="color" id="bg-color-picker" value="#000000">
                    </div>
                    
                    <div class="setting-row">
                        <label>불투명도:</label>
                        <input type="range" id="bg-opacity-slider" min="0" max="100" value="90" style="width: 120px;">
                        <span id="bg-opacity-value" style="font-size: 11px; margin-left: 5px;">90%</span>
                    </div>
                    
                    <div class="setting-row">
                        <label>텍스트:</label>
                        <input type="color" id="text-color-picker" value="#ffffff">
                    </div>
                    
                    <div class="setting-row">
                        <label>강조색:</label>
                        <input type="color" id="accent-color-picker" value="#00ff88">
                    </div>
                    
                    <div class="setting-row">
                        <label>진행바:</label>
                        <input type="color" id="progress-color-picker" value="#00ff88">
                    </div>
                    
                    <!-- Progress Bar Settings -->
                    <h4 style="margin: 15px 0 10px 0; font-size: 12px; color: #e0e0e0;">진행바 설정</h4>
                    
                    <div class="setting-row">
                        <label>진행바 너비:</label>
                        <input type="range" id="progress-bar-width-slider" min="80" max="200" value="120" style="width: 120px;">
                        <span id="progress-bar-width-value" style="font-size: 11px; margin-left: 5px;">120px</span>
                    </div>
                    
                    <div class="setting-row">
                        <label>진행바 높이:</label>
                        <input type="range" id="progress-bar-height-slider" min="2" max="12" value="4" style="width: 120px;">
                        <span id="progress-bar-height-value" style="font-size: 11px; margin-left: 5px;">4px</span>
                    </div>
                    
                    <!-- Sizes -->
                    <h4 style="margin: 15px 0 10px 0; font-size: 12px; color: #e0e0e0;">글자 크기</h4>
                    
                    <div class="setting-row">
                        <label>에피소드:</label>
                        <input type="range" id="episode-font-size-slider" min="6" max="40" value="16" style="width: 120px;">
                        <span id="episode-font-size-value" style="font-size: 11px; margin-left: 5px;">16px</span>
                    </div>
                    
                    <div class="setting-row">
                        <label>시리즈:</label>
                        <input type="range" id="series-font-size-slider" min="6" max="40" value="11" style="width: 120px;">
                        <span id="series-font-size-value" style="font-size: 11px; margin-left: 5px;">11px</span>
                    </div>
                    
                    <div class="setting-row">
                        <label>시간:</label>
                        <input type="range" id="time-font-size-slider" min="6" max="40" value="14" style="width: 120px;">
                        <span id="time-font-size-value" style="font-size: 11px; margin-left: 5px;">14px</span>
                    </div>
                    
                    <!-- Layout -->
                    <h4 style="margin: 15px 0 10px 0; font-size: 12px; color: #e0e0e0;">레이아웃</h4>
                    
                    <div class="setting-row">
                        <label>모서리:</label>
                        <input type="range" id="border-radius-slider" min="0" max="30" value="0" style="width: 120px;">
                        <span id="border-radius-value" style="font-size: 11px; margin-left: 5px;">0px</span>
                    </div>
                    
                    <div class="setting-row">
                        <label>높이:</label>
                        <input type="range" id="window-height-slider" min="100" max="150" value="100" style="width: 120px;">
                        <span id="window-height-value" style="font-size: 11px; margin-left: 5px;">100px</span>
                    </div>
                    
                    <div class="setting-row" style="margin-top: 15px;">
                        <button id="reset-appearance-btn" class="btn btn-small">초기화</button>
                        <button id="apply-appearance-btn" class="btn btn-small">저장</button>
                    </div>
                    
                    <div class="setting-row">
                        <button id="reset-button" class="control-btn" style="background: linear-gradient(135deg, #ff6b6b, #ee5a5a); color: white; width: 100%;">
                            기본값으로 재설정
                        </button>
                    </div>
                    
                    <div class="setting-row">
                        <button id="show-tutorial-button" class="control-btn" style="background: linear-gradient(135deg, #4ecdc4, #44a08d); color: white; width: 100%;">
                            📚 사용법 가이드 다시 보기
                        </button>
                    </div>
                </div>
                
                <div class="control-group">
                    <h3>연결 상태</h3>
                    <div id="status-display">
                        <div class="status-item">
                            <span class="status-label">연결:</span>
                            <span id="connection-status-detail" class="status-value">연결 중...</span>
                        </div>
                        <div class="status-item">
                            <span class="status-label">소스 탭:</span>
                            <span id="source-tab" class="status-value">None</span>
                        </div>
                        <div class="status-item">
                            <span class="status-label">마지막 업데이트:</span>
                            <span id="last-update" class="status-value">Never</span>
                        </div>
                    </div>
                </div>
                
                <div class="control-group">
                    <h3 class="collapsible-header" style="cursor: pointer; display: flex; align-items: center; justify-content: space-between;">
                        <span>OBS 연동 도움말</span>
                        <span id="help-toggle" style="font-size: 12px;">▶</span>
                    </h3>
                    <div id="help-content" style="display: none;">
                        <div class="capture-method">
                            <h4>VDO.Ninja로 원격 스트리밍</h4>
                            <p style="font-size: 12px; color: #ccc; margin-bottom: 8px;">
                                <strong>🌟 스트리밍하는 방법:</strong><br>
                                1. 아래 버튼 클릭하여 <a href="https://vdo.ninja/" target="_blank" style="color: #00ff88;">VDO.Ninja</a> 열기<br>
                                2. <strong>"Remote Screenshare into OBS"</strong> 선택<br>
                                3. 화면 공유 시 <strong>이 탭(Watch Party Overlay)</strong> 선택<br>
                                4. "Audio" 체크박스는 <strong>해제</strong> (오디오 불필요)<br>
                                5. Share 버튼 클릭 후 생성된 링크 복사<br>
                                6. OBS Browser Source에 복사한 링크 붙여넣기<br>
                                <br>
                                <strong style="color: #00ff88;">💡 팁:</strong> 검은 배경 위에 오버레이가 표시됩니다. OBS에서 필요에 따라 크로마키 등을 적용할 수 있습니다.
                            </p>
                            <div class="url-display">
                                <button id="open-vdo-ninja-btn" class="btn">
                                    <span style="font-size: 20px;">🎥</span> VDO.Ninja 열기
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="js/overlay-display.js"></script>
    
    <!-- 튜토리얼 오버레이 -->
    <div id="tutorial-overlay" class="tutorial-overlay" style="display: none;">
        <div class="tutorial-content">
            <div class="tutorial-header">
                <h2>🎉 스트리밍 디스플레이 사용법</h2>
                <p>처음 사용하시는군요! 간단한 가이드를 확인해보세요.</p>
            </div>
            
            <div class="tutorial-steps">
                <div class="tutorial-step active" data-step="1">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <h3>📺 오버레이 정보 표시</h3>
                        <p>현재 재생 중인 비디오의 <strong>제목</strong>, <strong>시간</strong>, <strong>진행률</strong>이 자동으로 표시됩니다.</p>
                        <p>투컴 환경에서는 VDO.Ninja를 통해 송출용 컴퓨터로 화면을 전송할 수 있습니다.</p>
                    </div>
                </div>
                
                <div class="tutorial-step" data-step="2">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <h3>⚙️ 설정 패널 열기</h3>
                        <p><strong>하단의 화살표 바</strong>를 클릭하면 설정 패널이 열립니다.</p>
                        <p>여기서 색상, 크기, 모드 등을 자유롭게 조정할 수 있습니다.</p>
                    </div>
                </div>
                
                <div class="tutorial-step" data-step="3">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <h3>🎨 모양 커스터마이징</h3>
                        <p>설정에서 <strong>배경색</strong>, <strong>텍스트 색상</strong>, <strong>크기</strong> 등을 조정하세요.</p>
                        <p>크로마키 사용 시 모서리를 설정하면 배경이 자동으로 투명해집니다.</p>
                    </div>
                </div>
                
                <div class="tutorial-step" data-step="4">
                    <div class="step-number">4</div>
                    <div class="step-content">
                        <h3>📹 투컴 환경에서 사용하기</h3>
                        <p>설정 패널의 <strong>VDO.Ninja 버튼</strong>을 클릭하여 "Remote Screenshare into OBS"를 선택하고,</p>
                        <p>생성된 링크를 <strong>송출용 컴퓨터의 OBS Browser Source</strong>에 추가하여 사용할 수 있습니다.</p>
                    </div>
                </div>
            </div>
            
            <div class="tutorial-navigation">
                <button id="tutorial-prev" class="tutorial-btn secondary" disabled>이전</button>
                <div class="tutorial-dots">
                    <span class="dot active" data-step="1"></span>
                    <span class="dot" data-step="2"></span>
                    <span class="dot" data-step="3"></span>
                    <span class="dot" data-step="4"></span>
                </div>
                <button id="tutorial-next" class="tutorial-btn primary">다음</button>
            </div>
            
            <div class="tutorial-footer">
                <label class="tutorial-checkbox">
                    <input type="checkbox" id="tutorial-dont-show">
                    <span class="checkmark"></span>
                    다시 보지 않기
                </label>
                <button id="tutorial-close" class="tutorial-btn close">시작하기</button>
            </div>
        </div>
    </div>
</body>
</html> 