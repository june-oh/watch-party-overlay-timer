# 변경 기록 (Changelog)

모든 주목할 만한 변경 사항들은 이 파일에 기록됩니다.

이 프로젝트는 [유의적 버전 명세](https://semver.org/lang/ko/)를 따릅니다.

## [미출시 (Unreleased)]
<!-- 다음 릴리스를 위한 변경 사항은 여기에 기록합니다. -->

## [3.0.0] - 2024-12-20

### 추가된 기능 (Added)
- **비디오 플레이어 하단 바 스타일 UI**: 비디오 플레이어 하단에 붙일 수 있는 가로형 바 형태의 인터페이스
  - 1200x100 크기의 가로형 레이아웃으로 비디오 아래 자연스럽게 배치 가능
  - 좌측: 제목 정보, 중앙: 프로그레스 바, 우측: 시간/컨트롤 배치
  - 색상 점(●)으로 연결 상태를 직관적으로 표시 (초록/주황/빨강)
  - 하단 폴드 방식의 설정 패널로 기본 화면은 깔끔하게 유지
- **동적 창 크기 조정**: 설정 패널 확장/축소에 따라 창 크기 자동 조정 (기본 1200x100, 확장 시 1200x500)
- **VDO.Ninja 연동**: 방송용 컴퓨터에서 원격으로 오버레이를 표시할 수 있는 기능
  - 자동 VDO.Ninja URL 생성 및 클립보드 복사 기능
  - 스트리밍 디스플레이 창의 URL을 VDO.Ninja에서 직접 캡처 가능
  - 방송용 컴퓨터에서 OBS Browser Source로 쉽게 사용 가능
- **스마트 창 관리**: 이미 열린 창이 있을 경우 기존 창을 포커스하는 중복 방지 시스템
- **정보 가져오기와 오버레이 표시 기능 분리**: 사용자 제어 기능 향상
  - "정보 가져오기" 토글: 비디오 정보 수집 기능만 독립적으로 제어
  - "오버레이 표시" 토글: VOD 위 오버레이 표시 기능만 독립적으로 제어
  - 오버레이 표시가 부적절한 사이트에서도 정보 수집만 활성화하여 스트리밍 디스플레이 창으로 정보 전송 가능

### 변경된 점 (Changed)
- **UI 패러다임 완전 전환**: 음악 플레이어 스타일에서 비디오 플레이어 하단 바 스타일로 재설계
  - 세로형 구조에서 가로형 1줄 바 레이아웃으로 변경 (좌측 제목 | 중앙 프로그레스 | 우측 컨트롤)
  - 창 크기를 800x200에서 1200x100으로 변경하여 비디오 하단 배치에 최적화
  - 설정이 항상 표시되던 방식에서 필요시 확장하는 폴드 방식으로 변경
  - 연결 상태를 텍스트에서 색상 점(●)으로 개선 (초록/주황/빨강)
- **반응형 레이아웃**: 창 크기에 따라 불필요한 요소 자동 숨김 (시리즈 제목, 플랫폼 뱃지 등)

### 개선된 점 (Improved)
- **창 관리 안정성 향상**: 새 탭 대신 독립된 팝업 창을 사용하여 스트리밍 디스플레이 접근성 개선
- **확장 프로그램 권한 최적화**: `windows` 권한 추가로 창 생성 및 관리 기능 안정화
- **파일 경로 정리**: `web_accessible_resources`에서 올바른 `public/` 경로 사용으로 파일 접근 문제 해결
- **연결 안정성 개선**: 주기적 상태 업데이트 및 오류 처리 강화로 연결 끊김 현상 최소화
- **사용자 피드백 개선**: 버튼 클릭 시 시각적 피드백 (복사 완료 표시 등) 추가

### 수정된 버그 (Fixed)
- **스트리밍 디스플레이 창 ERR_FILE_NOT_FOUND 오류 해결**: manifest.json의 web_accessible_resources 경로 수정 및 Chrome Extension API를 사용한 창 생성으로 변경
- **스트리밍 디스플레이 창 "Connection: Disconnected" 문제 해결**: Extension page 통신 방식 개선 및 초기 상태 직접 제공
- **제거된 함수 호출 오류 해결**: `updateOverlayAppearance` 함수 호출 정리 및 대체 로직 구현
- **설정 패널 확장/축소 기능 정상화**: 창 크기 조정 API 연동 및 애니메이션 효과 안정화
- **`BACKGROUND_STATE_UPDATE` 메시지 처리 오류 해결**: JavaScript에서 미처리 메시지 타입으로 인한 연결 문제 해결
- **content.js에서 `lastVideoInfoString` 변수 선언 누락 문제 해결**: 정보 전송이 중단되던 JavaScript 오류 수정

## [2.0.0] - 2024-12-20

### 추가된 기능 (Added)
- **전체 폰트 배율 조정**: 모든 텍스트에 0.5~2.0배 배율을 적용할 수 있는 기능 추가
- **세밀한 폰트 크기 제어**: 시리즈, 에피소드, 현재시간, 전체시간 폰트 크기를 개별적으로 조정 가능
- **줄간격 조정**: 시리즈와 에피소드 텍스트 사이의 간격을 -5~10px 범위에서 조정 가능 (음수 값으로 겹치기 효과 가능)
- **오버레이 크기 세밀 조정**: 너비(50~800px), 내부 여백(2~20px) 조정 기능
- **설정 관리 시스템**: 설정 저장, 불러오기, 초기화 기능으로 사용자 설정 백업 및 복원 가능
- **오버레이 자동 복구**: 페이지 이동 시 오버레이 상태가 자동으로 유지되는 시스템

### 개선된 점 (Improved)
- **팝업 UI 개선**: 
  - 오버레이 보이기/숨기기와 컴팩트 모드를 iOS 스타일 토글 스위치로 변경하여 더욱 직관적인 사용자 경험 제공
  - 컨트롤 순서를 사용자 친화적으로 재배치: 오버레이 토글 → 컴팩트 모드 토글 → 위치 → 제목 표시 → 시간 표시 → 테마 순으로 변경
  - 토글 스위치가 라벨 오른쪽에 위치하도록 레이아웃 개선
  - iOS 스타일 토글 스위치를 더 정확한 원통 모양으로 개선 (원이 원통 안에서 부드럽게 이동)
- **성능 최적화**: 슬라이더 조정 시 throttling 적용으로 부드러운 실시간 반영
- **사용자 경험 개선**: 숫자 입력 필드에서 중간 입력값 처리 개선

### 수정된 버그 (Fixed)
- **오버레이 토글 시 정보 표시 문제**: 오버레이를 켤 때 기존 정보가 "N/A"로 표시되는 문제를 해결하여, 항상 유효한 정보가 표시되도록 개선
- **오버레이 크기 제한 문제**: 366px 이하로 줄어들지 않던 문제 해결 (CSS 중복 규칙 제거 및 컴팩트 모드 크기 제한 수정)
- **마우스 호버 이벤트 무한 반복**: Netflix에서 발생하던 성능 문제 해결

### 변경된 점 (Changed)
- **전체시간 표시 방식**: 투명도 0.8 적용 및 슬래쉬(/) 포함하여 폰트 크기 조정
- **용어 정리**: "최소 너비" → "너비", "여백" → "외부 여백"으로 명확화

## [1.5.1] - 2024-12-19

### 추가된 기능 (Added)
- **Netflix 및 YouTube 플랫폼 지원**: 새로운 스트리밍 플랫폼에서도 오버레이 기능을 사용할 수 있습니다.
- **팝업 버전 표시**: 팝업 하단에 현재 확장 프로그램 버전을 표시하여 사용자가 쉽게 확인할 수 있습니다.

### 변경된 점 (Changed)
- **UI 통합 및 간소화**: "비디오 정보 가져오기" 버튼을 제거하고 "오버레이 보이기" 기능과 통합했습니다. 이제 오버레이를 켜면 자동으로 정보 가져오기가 시작되고, 끄면 자동으로 중지됩니다.
- **로그 레벨 최적화**: 정보 가져오기 관련 로그를 디버그 레벨로 변경하여 일반 사용자에게는 보이지 않도록 개선했습니다.

### 수정된 버그 (Fixed)
- Netflix 단일 영화 및 시리즈 제목 파싱 개선 및 content.js 모듈 오류 수정

## [1.4.1] - 2025-05-13

### 수정된 버그 (Fixed)
- `public/css/` 디렉토리를 제거하고 `overlay.css`를 `public/` 디렉토리로 이동함에 따른 내부 경로 참조를 최종적으로 정리했습니다.

## [1.4.0] - 2025-05-13

### 변경된 점 (Changed)
- **시간 표시 형식 변경**:
    - 영상 총 길이가 1시간 이상일 경우 `H:MM:SS` (예: `1:23:45`), 1시간 미만일 경우 `MM:SS` (예: `23:45`) 형식으로 표시되도록 수정했습니다.
    - 시간(H) 표시는 10시간 미만일 때 앞에 `0`을 붙이지 않습니다 (예: `1:05:30`).
- **시간 표시 안정성 개선**:
    - 시간(H) 표시 여부에 따라 `MM:SS` 부분의 시작 위치가 변동하지 않도록, 시간(H)이 없는 경우 해당 공간만큼 왼쪽에 여백(placeholder)을 추가하여 레이아웃 떨림 현상을 개선했습니다. (`public/css/overlay.css`, `src/content.js`)
    - 시간 표시 텍스트를 왼쪽 정렬로 변경하여 숫자 너비 변화에 따른 떨림 현상을 줄였습니다. (`public/css/overlay.css`)

### 개선된 점 (Improved)
- **시간 표시 폰트 및 너비 관리 개선**:
    - 시간 표시에 사용되는 폰트를 기본 Noto Sans 계열로 일관화했습니다.
    - 시간 문자열 길이에 따라 (예: `HH:MM:SS` vs `MM:SS`, `현재시간/전체시간` vs `현재시간만`) 오버레이의 전체 너비 변동을 최소화하기 위해 CSS `min-width`를 상황에 맞게 동적으로 적용하도록 개선했습니다. (`public/css/overlay.css`, `src/content.js`)
- **CSS 파일 구조 변경**:
    - `overlay.css` 파일의 위치를 `public/css/overlay.css`에서 `public/overlay.css`로 변경하고, `manifest.json`의 관련 경로를 업데이트하여 프로젝트 구조를 단순화했습니다. (사용자님께서 이미 `manifest.json`을 수정해주셨습니다.)

### 예정된 변경 사항 (기존 Unreleased 항목 이동)
- Chzzk, LAFTEL 이외의 사이트 지원 확대
- 오버레이 테마 사용자 정의 기능 추가
- 기타 요청된 기능 구현 검토

## [1.3.1] - 2025-05-12

### 개선된 점 (Improved)
- **비디오 정보 가져오기 상태 유지 로직 개선:**
  - Laftel 사이트에서 동일 시리즈 내 다른 에피소드로 이동 시 정보 가져오기 상태가 유지됩니다.
  - Chzzk 사이트에서 다른 VOD로 이동 시 (URL의 비디오 ID 변경 시) 정보 가져오기 상태가 유지됩니다.
  - 다른 웹사이트로 이동하거나 호스트 이름이 변경될 경우 정보 가져오기가 정상적으로 중지됩니다.
- **Chzzk 사이트 제목 표시 안정화:** 일반 모드 및 풀스크린 모드에서 VOD 제목이 보다 안정적으로 표시되도록 선택자 및 로직을 수정했습니다.

### 수정된 버그 (Fixed)
- Laftel 사이트에서 정보 가져오기 시 간헐적으로 제목/시리즈 정보가 "N/A"로 표시되었다가 다시 정상으로 돌아오는 깜빡임 현상을 이전 값 유지 로직으로 완화했습니다.

## [1.3.0] - 2025-05-12

### 수정된 버그 (Fixed)
- 다른 환경/컴퓨터에서 압축 해제하여 로드 시 팝업 창의 버튼이 작동하지 않던 문제 해결:
  - `popup.js` 파일을 `src/` 폴더에서 `public/js/` 폴더로 이동하고, `popup.html` 내 스크립트 참조 경로를 수정하여 `popup.js` 로드 오류 (`ERR_FILE_NOT_FOUND`)를 해결했습니다.

## [1.2.0] - 2025-05-10

### 추가된 기능 (Added)
- 오버레이 위치 좌/우 토글 기능
- 오버레이 테마 드롭다운 메뉴에서 선택가능
  - 현재 선택 가능한 테마 :
    - 라이트
    - 다크
    - 그린스크린(화이트 폰트)
    - 그린스크린(블랙 폰트)

### 개선된 점 (Improved)
- Laftel 사이트 영화/극장판 제목 처리 개선: 시리즈 제목 없이 단일 제목만 있는 경우, 해당 제목을 "에피소드 제목"으로 올바르게 표시하고 "시리즈 제목"은 비워두도록 `src/content.js`의 정보 수집 로직을 수정했습니다.
- 선택된 모드나 레이아웃의 표시 형식을 수정하여 더욱 명확하게 표시되도록 개선했습니다.

## [1.1.0] - 2025-05-10

### 추가된 기능 (Added)
- 오버레이 너비 자동 조절 기능: 내용 길이에 따라 오버레이 너비가 유동적으로 변경됩니다. (최소/최대 너비 제한 포함)
- 텍스트 말줄임표 처리 기능: 오버레이 내 긴 텍스트(시리즈/에피소드 제목 등)가 너비를 초과할 경우 '...'로 표시됩니다.

### 개선된 점 (Improved)
- 시간 표시 형식 버튼 UI 개선: 버튼 색상을 더 명확하게 변경하고, 전체적인 팝업 UI 색상 일관성을 위해 CSS 변수를 도입했습니다.
- 시간 표시 형식 변경 기능 안정화: 팝업에서 시간 표시 형식을 변경하면 오버레이에 즉시 정확하게 반영되도록 수정했습니다.

## [1.0.0] - 2025-05-10

### 추가된 기능 (Added)
- 시간 표시 모드 순환 기능 (현재시간만 / 현재시간+전체시간 / 숨김)
- 오버레이 위치 좌/우 토글 기능 (구현 진행 중)

### 변경된 점 (Changed)
- "세로 모드"가 "위치 변경" 기능으로 대체됨.

### 수정된 버그 (Fixed)
- Laftel.net 및 Chzzk.naver.com 사이트 제목/정보 수집 문제 해결.
- `background.js`와 `content.js` 간의 초기 상태 동기화 오류 수정.
- 팝업 UI 스타일링 문제 개선.

### 제거된 기능 (Removed)
- 오버레이 텍스트 클립보드 복사 기능.
- 오버레이 모서리 상세 위치 선택 기능 (4개 코너 및 패딩 조절).
- 초기 "세로 모드" (텍스트가 세로로 길게 늘어지는 방식 및 글자 단위 세로 쓰기).

### 개선된 점 (Improved)
- **오버레이 토글 시 정보 표시 문제**: 오버레이를 켤 때 기존 정보가 "N/A"로 표시되는 문제를 해결하여, 항상 유효한 정보가 표시되도록 개선

---

아래는 변경 기록 항목의 예시입니다:

```markdown
## [0.1.0] - (예상 릴리스 날짜: YYYY-MM-DD) - 초기 버전 예시

### 추가된 기능
- 기본적인 시간 및 제목 오버레이 표시 기능.
- 지원 사이트: Laftel.net, Chzzk.naver.com.
- 오버레이 모드: 일반, 컴팩트, 그린스크린.
- 팝업을 통한 오버레이 제어 (정보 가져오기, 표시/숨기기, 모드 변경).
``` 